<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List of Applicants</title>
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
</head>
<body>
    <div class="container mt-3">
        <table class="table table-dark">
            <thead>
                <th>Sno</th>
                <th>Name</th>
                <th>Mobile</th>
                <th>DOB</th>
                <th>Programme</th>
                <th>Gender</th>
                <th>Email</th>
            </thead>
            <tbody id="tbody1"></tbody>
        </table>
        </div>
        <script type="module">
            
            const firebaseConfig = {
                apiKey: "AIzaSyC_xbFR3dj2W58n9LJJ1Qz-pZLd1mBPoxk",
                authDomain: "stmaryswebsite-fb8ff.firebaseapp.com",
                projectId: "stmaryswebsite-fb8ff",
                storageBucket: "stmaryswebsite-fb8ff.appspot.com",
                databaseURL : "https://stmaryswebsite-fb8ff-default-rtdb.firebaseio.com/",
                messagingSenderId: "77865070851",
                appId: "1:77865070851:web:664be3ae00068d6c6cf936",
                measurementId: "G-JW4MKXGJZQ"
              };
              if (!firebase.apps.length) {
                firebase.initializeApp({});
             }else {
                firebase.app(); // if already initialized, use that one
             }              var contactFormDB = firebase.database();

            var stdno=0;
            var tbody=document.getElementById('tbody1');

            function AddItemToTable(name,mobile,dob,programme,gender,email){
                let trow=document.createElement("tr");
                let td1 =document.createElement('td');
                let td2=document.createElement('td');
                let td3=document.createElement('td');
                let td4=document.createElement('td');
                let td5=document.createElement('td');
                let td6=document.createElement('td');

                td1.innerHTML= ++stdno;
                td2.innerHTML=name;
                td3.innerHTML=mobile;
                td4.innerHTML=dob;
                td5.innerHTML=programme;
                td6.innerHTML=gender;
                td6.innerHTML=email;

                trow.append(td1);
                trow.append(td2);
                trow.append(td3);
                trow.append(td4);
                trow.append(td5);
                trow.append(td6);
                tbody.appendChild(trow);                
            }
            const firebaseConfig = {
                apiKey: "AIzaSyC_xbFR3dj2W58n9LJJ1Qz-pZLd1mBPoxk",
                authDomain: "stmaryswebsite-fb8ff.firebaseapp.com",
                projectId: "stmaryswebsite-fb8ff",
                storageBucket: "stmaryswebsite-fb8ff.appspot.com",
                databaseURL : "https://stmaryswebsite-fb8ff-default-rtdb.firebaseio.com/",
                messagingSenderId: "77865070851",
                appId: "1:77865070851:web:664be3ae00068d6c6cf936",
                measurementId: "G-JW4MKXGJZQ"
              };
              firebase.initializeApp(firebaseConfig);
            
              var stdno=0;
              function addItemsToList(name,mobile,email,gen){
                var ul=document.getElementById('list');
                var header=document.createElement('h2');
                
                var _name= document.createElement('li');
                var _rollNo= document.createElement('li');
                var _sec= document.createElement('li');
                var _gen= document.createElement('li');
    
                header.innerHTML='Student-'+(++stdno)
                _name.innerHTML='Name: '+name;
                _rollNo.innerHTML='Mobile :'+mobile;
                _sec.innerHTML='Section :'+email;
                _gen.innerHTML='Gender :'+gen;
    
                ul.appendChild(header)
                ul.appendChild(_name)
                ul.appendChild(_rollNo)
                ul.appendChild(_sec)
                ul.appendChild(_gen)
              }
          
              function FetchAllData(){
                firebase.database().ref('Candidate').once('value',function(snapshot){
                    snapshot.forEach(
                        function(childSnapshot){
                            let name=childSnapshot.val().name;
                            let mobile=childSnapshot.val().mobile;
                            let gen=childSnapshot.val().gender;
                            let email=childSnapshot.val().email;
                            addItemsToList(name,mobile,email,gen);
                            AddAllItemsToTable(name,mobile,email,gen);

                        }
                    );
                });
              }
              window.onload(FetchAllData());
        </script>
        <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
        <script src='https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js'></script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>
          <script src="./js/mail.js"></script>
          <script src="js/bootstrap.bundle.js"></script>

          <!-- function AddAllItemsToTable(candidate){
            stdno=0;
            tbody.innerHTML="";
            
            candidate.forEach(element =>{
                AddAllItemsToTable(element.name,element.mobile,element.dob,element.programme,element.gender,element.email)
            });
        }

        function GetAllDataOnce(){
        const db = firebase.database();
            const dbref=ref(db,"Candidate");
            onValue(dbref,(snapshot)=>{
                
                var students=[];
                snapshot.forEach(childSnapshot => {
                    students.push(childSnapshot.val());
            });
           
                AddAllItemsToTable(students);
            });
        } -->
</body>
</html>